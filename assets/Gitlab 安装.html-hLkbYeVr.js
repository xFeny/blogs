import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as e,c as s,e as n}from"./app-GjMnSfh8.js";const i={},l=n(`<h1 id="gitlab-安装" tabindex="-1"><a class="header-anchor" href="#gitlab-安装" aria-hidden="true">#</a> Gitlab 安装</h1><h2 id="centos-下安装" tabindex="-1"><a class="header-anchor" href="#centos-下安装" aria-hidden="true">#</a> CentOS 下安装</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="docker-下安装" tabindex="-1"><a class="header-anchor" href="#docker-下安装" aria-hidden="true">#</a> Docker 下安装</h2><p>拉取镜像</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull gitlab/gitlab-ce:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>中文版镜像</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull twang2218/gitlab-ce-zh:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建挂载目录</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker/gitlab/config /data/docker/gitlab/logs /data/docker/gitlab/data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>运行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token parameter variable">-p</span> <span class="token number">8443</span>:443 <span class="token parameter variable">-p</span> <span class="token number">8081</span>:80 <span class="token parameter variable">-p</span> <span class="token number">8022</span>:22 <span class="token parameter variable">--name</span><span class="token operator">=</span>gitlab <span class="token punctuation">\\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /data/docker/gitlab/config:/etc/gitlab <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /data/docker/gitlab/logs:/var/log/gitlab <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /data/docker/gitlab/data:/var/opt/gitlab <span class="token punctuation">\\</span>
<span class="token parameter variable">--privileged</span><span class="token operator">=</span>true gitlab/gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> gitlab /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置邮件发送功能</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /data/docker/gitlab/config/gitlab.rb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在文件的最后加上配置：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gitlab_rails[&#39;smtp_enable&#39;] = true
gitlab_rails[&#39;smtp_address&#39;] = &quot;smtp.qq.com&quot;
gitlab_rails[&#39;smtp_port&#39;] = 465
gitlab_rails[&#39;smtp_user_name&#39;] = &quot;fuck@qq.com&quot;
gitlab_rails[&#39;smtp_password&#39;] = &quot;授权码&quot;
gitlab_rails[&#39;smtp_domain&#39;] = &quot;smtp.qq.com&quot;
gitlab_rails[&#39;smtp_authentication&#39;] = &quot;login&quot;
gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] = true
gitlab_rails[&#39;smtp_tls&#39;] = true
gitlab_rails[&#39;gitlab_email_from&#39;] = &#39;fuck@qq.com&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>进入终端</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> gitlab /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>刷新配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-ctl reconfigure
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,21),t=[l];function r(d,c){return e(),s("div",null,t)}const u=a(i,[["render",r],["__file","Gitlab 安装.html.vue"]]);export{u as default};
